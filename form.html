<!DOCTYPE html>
<html>
    <head>
        <title>Kenyan Burnham's Scripting Exercise 1</title>
        <!-- Enterprise fonts-->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
        <!-- Custom stylesheet for this project-->
        <link rel="stylesheet" href="css/form.css">
    </head>
    <body>
        <!--
            Dr. Baehr,

            When inspecting this, you will find a sleu of files in the
            filesystem, these files are all related to the profile assignment.
            I've used GitHub pages to host the files so that they can be brought
            into the wix-site as an iframe or as an individual page.

            The only files that relate to this project are the following:
            - form.html

            I've left the javascript in-text so that's it's easier for
            you to see how I'm adding the behavior.

            CONCEPT
            I thought it would be fun to make an visual/digital archive of some sort,
            so I have written this form to take in information for a visual/digital archive.

            Originally, I had envisioned hosting the images myself but I decided against it after
            working with several cloud APIs and trying to learn the HTTP protocol library.
            I determined that this was past the scope of the project and pushed the limits of my knowledge of server-side JavaScript.
            In the future, it will be fun to try and make this a reality.

            - Kenyan
        -->
        <div class="full-content-container" id="submissionContainer">
              <!-- This aside holds all of the form elements-->
              <aside class="form-section form-overflow">
                  <!--The form -->
                  <form id="scriptingExerciseForm" action="mailto:kenyan.burnham@ttu.edu?subject=Submission%20sent%20from%20Kenyan&rsquo;s%20Site&body=Thank%20you%20fname%0lname%20for%20your%20submission?" method="post" enctype="multipart/form-data" onsubmit="thankYou();">
                        <h1 class="form-title">Submit a Digital Artifact</h1>
                        <small>Submit an image URL to our digital artifact database.</small><br><br>
                        <hr>
                        <!-- This fieldset contains the submitter's information for follow-up-->
                        <fieldset>
                            <!--First Name-->
                            <label for="fname">Name</label><br>
                            <input type="text" id="fname" class="inputs" name="fname" placeholder="First" required> &nbsp; &nbsp;
                            <!--Last Name-->
                            <input type="text" id="lname" class="inputs" name="lname" placeholder="Last" required><br><br>
                            <!-- Email-->
                            <label for="submitterEmail">Email</label><br>
                            <input type="email" id="emailInput" class="inputs" name="submitterEmail" placeholder="your@email.com" required><br>
                        </fieldset>

                        <!-- This fieldset contains an optional select for organizing the archive-->
                        <fieldset>
                            <!-- This input specifies an image URL already hsoted somewhere else -->
                            <label for="hostedImage">Image Url</label><br>
                            <input type="url" id="imageHostedInput" class="inputs" name="hostedImage" placeholder="image.url" required></input><input type="button" id="sampleURLForSubmission" class="button-style button-sample" name="exampleValueForImage" data-sample-url="https://kenyanburnham.github.io/ENG3368/images/lh-logo.png" value="Use Sample URL"><br><br>

                            <label for="categoryForSubmisison">Artifact Category (Optional)</label><br>
                            <small>This will help our team sort the artifact into distinct sub-groups and pages. Specify your own cby selecting "other".</small><br>
                            <!-- This is the meta information for what category it should be filed under-->
                            <select id="categoryForSubmission" optional class="inputs option-style">
                                <option value="Esoteric" class="option-style">Esoteric</option>
                                <option value="Ludic" class="option-style">Ludic</option>
                                <option value="Useful" class="option-style">Useful</option>
                                <option value="Meme" class="option-style">Meme</option>
                                <option value="Other" class="option-style">Other</option>
                            </select><br>
                            <!-- TODO: Make sure that this funcitonality is scripted -->
                            <!--This is if they user selects Other -->
                            <textarea id="textAreaForOther" name="name" rows="4" cols="40" placeholder="Please specify if 'Other' selected." hidden optional></textarea>
                        </fieldset>

                        <!-- Script for the programmatic behavior of the "other" option-->
                        <script type="text/javascript">
                            //Get the data list element for value evaluation
                            let select = document.getElementById("categoryForSubmission");
                            //get the textArea for resetting hidden status and behavior
                            let textAreaForOther = document.getElementById('textAreaForOther');
                            //Add listener event for when the value changes
                            select.onchange = function(){
                                //reset the textArea behavior
                                textAreaForOther.hidden = true;
                                // TODO: Remove test console
                                console.log(select.value);
                                // add a case to toggle the hidden attribute for when Other is selected
                                if (select.value == "Other") {
                                    textAreaForOther.hidden = false;
                                } else if (select.value != "Other") {
                                    textAreaForOther.hidden = true;
                                }
                            }

                            //This allows for a sample injection of an already hosted image
                            let sampleurlForSubmission = document.getElementById('sampleURLForSubmission');
                            //this is the onclick fucntion for injecting the url into the input field
                            sampleurlForSubmission.onclick = function (){
                                //get the sample url
                                let urlForSample = sampleurlForSubmission.getAttribute("data-sample-url");
                                //place it in the input box
                                let imageHostedInput = document.getElementById('imageHostedInput');
                                imageHostedInput.value = urlForSample;
                                // TODO: Add the disable button functionality
                            }

                        </script>

                        <!-- This is the submission button -->
                        <fieldset>
                            <hr>
                            <!-- This is the submission button -->
                            <input type="submit" class="button-style button-submit-disabled" name="submitButton" value="Submit" disabled id="submitButton"></input>
                            <!-- This just an optional reset button-->
                            <input type="reset" class="button-style button-reset" name="clearButton" value="Reset" id="clearButton">
                        </fieldset>

                        <script type="text/javascript">
                              //get the reset button element
                              let clearButton = document.getElementById("clearButton");
                              // When clicked, ensure that the textArea box is reset
                              //Since it doesn't natively do so
                              clearButton.onclick = function(){
                                  //get the textArea input
                                  let textAreaForOtherForReset = document.getElementById('textAreaForOther');
                                  //Clear the contents
                                  textAreaForOtherForReset.innerHTML = "";
                                  //Then hide the box
                                  textAreaForOtherForReset.hidden = true;
                              }
                        </script>

                  </form>
              </aside>
        </div>

        <div class="thank-you-container" id="thankYouContainer" hidden>
            <aside class="thank-you-message">
                <h1 class="thank-you-title">Thank you for your submission <span id="firstNameGoesHere"></span> <span id="lastNameGoesHere"></span>!</h1>
                <span>
                    <img id="imageOutput" class="image-container" src="" alt="This is an image hosted from an external source, content varies.">
                </span>
                <h1 class="thank-you-title">If you would like, you can <a onclick="backToSubmission();" class="resubmit-anchor">submit another &#8594;</a></h1>

            </aside>
        </div>

        <script type="text/javascript">
            //get the submit button for programatic change of the file
            let submitButton = document.getElementById('submitButton');
            let form = document.getElementById("scriptingExerciseForm");
            //Set the disabled button once

            //set a change listener that polls for form changes to see if the conditions are met to submit
            form.onchange = function(){
                //Grab the form elements to ensure they are not empty
                let fNameInput = document.getElementById('fname').value;
                let lNameInput = document.getElementById('lname').value;
                let emailInput = document.getElementById('emailInput').value;
                let imageHostedInput = document.getElementById('imageHostedInput').value;

                //Evaluate if all the required elements have something in them
                if((fNameInput != "") && (lNameInput != "") && (emailInput != "") && (imageHostedInput != "")){
                    //Change the disabled property
                    submitButton.disabled = false;
                    submitButton.classList.remove("button-submit-disabled");
                    submitButton.className += " button-submit";
                    console.log(submitButton);
                } else {
                    //else, keep the disabled property attribute
                    //This case will likely come into use on the return from the thank you page
                    submitButton.disabled = true;
                    submitButton.classList.remove("button-submit");
                }
            }

            //This funciton is only really for the switching of submission and thank you page
            function clearInputsManually(){
                //this just clears the form
                form.reset();
                //reset the daiabled attribute for the submit button
                submitButton.diabled = true;
                submitButton.className += " button-submit-disabled";
            }

            //Adding a thank you for submition page
            function thankYou(){
                //Grab the name and image url data to personalize the submission thank you
                let fNameInput = document.getElementById('fname');
                let lNameInput = document.getElementById('lname');
                let imageToDisplayForThankYou = document.getElementById('imageHostedInput');
                // Grab where the names and image are going to go
                let fNameOutput = document.getElementById('firstNameGoesHere');
                let lNameOutput = document.getElementById('lastNameGoesHere');
                let imageOutput = document.getElementById('imageOutput');

                //assign the names, then do the hidden attirbute changes
                fNameOutput.innerHTML = fNameInput.value;
                lNameOutput.innerHTML = lNameInput.value;
                imageOutput.src = imageToDisplayForThankYou.value;

                //get the submission container and hide it
                let submissionContainer = document.getElementById("submissionContainer");
                submissionContainer.hidden = true;

                //then get the thank you container and show it
                let thankYouContainer = document.getElementById("thankYouContainer");
                thankYouContainer.hidden = false;
            }

            // Provides a return function back to the submission page
            function backToSubmission(){
                //Reverse the previous function
                //clear previous values of thank you container, if any
                let firstNameSpan = document.getElementById('firstNameGoesHere');
                firstNameSpan.innerHTML = "";
                //clear the last name as well
                let lastNameSpan = document.getElementById('lastNameGoesHere');
                lastNameSpan.innerHTML = "";

                clearInputsManually();

                //get the submission container and hide it
                let thankYouContainer = document.getElementById("thankYouContainer");
                thankYouContainer.hidden = true;
                //then get the thank you container and show it
                let submissionContainer = document.getElementById("submissionContainer");
                submissionContainer.hidden = false;

                //reset the daiabled attribute for the submit button
                submitButton.disabled = true;
            }
        </script>

    </body>
</html>
